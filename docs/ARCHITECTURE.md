# VSCode AI Assistant - æŠ€æœ¯æ¶æ„æ–‡æ¡£

> ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„ VSCode AI ç¼–ç¨‹åŠ©æ‰‹ï¼Œé›†æˆäº† MCP å·¥å…·ç³»ç»Ÿã€Skill æŠ€èƒ½åŒ…ã€å¤šå±‚è®°å¿†ç®¡ç†ã€LangGraph Agent ç­‰å…ˆè¿›ç‰¹æ€§ã€‚

## ğŸ“‹ ç›®å½•

- [é¡¹ç›®æ¦‚è¿°](#é¡¹ç›®æ¦‚è¿°)
- [æ ¸å¿ƒæ¶æ„](#æ ¸å¿ƒæ¶æ„)
- [ç³»ç»Ÿæµç¨‹](#ç³»ç»Ÿæµç¨‹)
- [æ¨¡å—è¯¦è§£](#æ¨¡å—è¯¦è§£)
- [æŠ€æœ¯ä¼˜åŠ¿](#æŠ€æœ¯ä¼˜åŠ¿)
- [æ‰©å±•æŒ‡å—](#æ‰©å±•æŒ‡å—)

---

## é¡¹ç›®æ¦‚è¿°

### è®¾è®¡ç†å¿µ

æœ¬é¡¹ç›®é‡‡ç”¨**æ¨¡å—åŒ– + æ’ä»¶åŒ–**çš„æ¶æ„è®¾è®¡ï¼Œæ ¸å¿ƒç†å¿µæ˜¯ï¼š

1. **å¯æ‰©å±•æ€§** - é€šè¿‡ MCP å·¥å…·å’Œ Skill æŠ€èƒ½åŒ…ï¼Œç”¨æˆ·å¯ä»¥æ— é™æ‰©å±• AI èƒ½åŠ›
2. **å¯è§†åŒ–** - ä»»åŠ¡æ‰§è¡Œè¿‡ç¨‹å®Œå…¨é€æ˜ï¼Œç”¨æˆ·æ¸…æ™°äº†è§£ AI åœ¨åšä»€ä¹ˆ
3. **æ™ºèƒ½è®°å¿†** - å¤šå±‚æ¬¡è®°å¿†ç³»ç»Ÿï¼ŒAI èƒ½å¤Ÿè®°ä½ä¸Šä¸‹æ–‡ã€ç”¨æˆ·åå¥½ã€é¡¹ç›®çŸ¥è¯†
4. **å¤šæ¨¡å‹æ”¯æŒ** - é€‚é… OpenAIã€Anthropicã€DeepSeek ç­‰ä¸»æµ LLM

### æŠ€æœ¯æ ˆ

```
å‰ç«¯ (Webview)
â”œâ”€â”€ React 18 + TypeScript
â”œâ”€â”€ Tailwind CSS
â””â”€â”€ Vite æ„å»º

åç«¯ (Extension Host)
â”œâ”€â”€ VSCode Extension API
â”œâ”€â”€ Node.js
â””â”€â”€ esbuild æ„å»º

AI/Agent
â”œâ”€â”€ LangGraph (çŠ¶æ€æœº Agent)
â”œâ”€â”€ MCP Protocol (å·¥å…·åè®®)
â””â”€â”€ å¤š LLM é€‚é…å™¨
```

---

## æ ¸å¿ƒæ¶æ„

### æ•´ä½“æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           VSCode Extension                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  ChatView   â”‚  â”‚  MCP Panel  â”‚  â”‚   Diagram   â”‚  â”‚    Test     â”‚ â”‚
â”‚  â”‚  Provider   â”‚  â”‚  Provider   â”‚  â”‚  Generator  â”‚  â”‚  Generator  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚         â”‚                â”‚                â”‚                â”‚        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                    Message Handler Layer                       â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚ â”‚
â”‚  â”‚  â”‚   Chat   â”‚ â”‚   MCP    â”‚ â”‚ Command  â”‚ â”‚  Config  â”‚          â”‚ â”‚
â”‚  â”‚  â”‚ Handler  â”‚ â”‚ Handler  â”‚ â”‚ Handler  â”‚ â”‚ Handler  â”‚          â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚          â”‚            â”‚            â”‚            â”‚                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                      Core Services Layer                        â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚ â”‚
â”‚  â”‚  â”‚  Chat Service  â”‚  â”‚  MCP Executor  â”‚  â”‚ Session Managerâ”‚    â”‚ â”‚
â”‚  â”‚  â”‚  (API Calls)   â”‚  â”‚  (Tool Calls)  â”‚  â”‚  (Persistence) â”‚    â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ â”‚
â”‚  â”‚          â”‚                   â”‚                   â”‚              â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚ â”‚
â”‚  â”‚  â”‚               Agent Orchestrator                        â”‚    â”‚ â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚    â”‚ â”‚
â”‚  â”‚  â”‚  â”‚ Intent   â”‚  â”‚ LangGraphâ”‚  â”‚  Action  â”‚              â”‚    â”‚ â”‚
â”‚  â”‚  â”‚  â”‚Classifierâ”‚  â”‚  Agent   â”‚  â”‚ Executor â”‚              â”‚    â”‚ â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚    â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                    Infrastructure Layer                         â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚ â”‚
â”‚  â”‚  â”‚  Memory  â”‚  â”‚Execution â”‚  â”‚   Skill  â”‚  â”‚    I18n  â”‚       â”‚ â”‚
â”‚  â”‚  â”‚ Manager  â”‚  â”‚ Pipeline â”‚  â”‚  Manager â”‚  â”‚  Manager â”‚       â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           LLM Adapters                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚  OpenAI  â”‚  â”‚Anthropic â”‚  â”‚ DeepSeek â”‚  â”‚  Ollama  â”‚            â”‚
â”‚  â”‚ Adapter  â”‚  â”‚ Adapter  â”‚  â”‚ Adapter  â”‚  â”‚ Adapter  â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ•°æ®æµå‘

```
ç”¨æˆ·è¾“å…¥
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Smart Input    â”‚ â”€â”€â”€ è§£ææ„å›¾ã€å‘½ä»¤ã€@mentions
â”‚    Parser       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Intent       â”‚ â”€â”€â”€ åˆ†ç±»ï¼šå¯¹è¯/å·¥å…·è°ƒç”¨/ä»£ç æ“ä½œ/æœç´¢
â”‚   Classifier    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
    â”‚         â”‚
    â–¼         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Chat  â”‚ â”‚ MCP/Skill â”‚
â”‚ Flow  â”‚ â”‚   Flow    â”‚
â””â”€â”€â”€â”¬â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
    â”‚           â”‚
    â–¼           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  LLM  â”‚ â”‚  Tool     â”‚
â”‚ Call  â”‚ â”‚ Executor  â”‚
â””â”€â”€â”€â”¬â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
    â”‚           â”‚
    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Task Execution â”‚ â”€â”€â”€ å¯è§†åŒ–æ‰§è¡Œè¿‡ç¨‹
â”‚    Pipeline     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Memory       â”‚ â”€â”€â”€ æ›´æ–°è®°å¿†ç³»ç»Ÿ
â”‚    Manager      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
    å“åº”è¾“å‡º
```

---

## ç³»ç»Ÿæµç¨‹

### 1. MCP å·¥å…·è°ƒç”¨æµç¨‹

```
ç”¨æˆ·è¯·æ±‚: "@mcp:read_file src/index.ts"
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 1: åˆ›å»ºæ‰§è¡Œè®¡åˆ’                                     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ExecutionPlan {                                      â”‚ â”‚
â”‚ â”‚   name: "MCP: è¯»å–æ–‡ä»¶",                             â”‚ â”‚
â”‚ â”‚   source: "mcp",                                     â”‚ â”‚
â”‚ â”‚   steps: [                                           â”‚ â”‚
â”‚ â”‚     { name: "å‚æ•°éªŒè¯", status: "pending" },         â”‚ â”‚
â”‚ â”‚     { name: "æƒé™æ£€æŸ¥", status: "pending" },         â”‚ â”‚
â”‚ â”‚     { name: "æ‰§è¡Œå·¥å…·", status: "pending" },         â”‚ â”‚
â”‚ â”‚     { name: "å¤„ç†ç»“æœ", status: "pending" }          â”‚ â”‚
â”‚ â”‚   ]                                                  â”‚ â”‚
â”‚ â”‚ }                                                    â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 2: é€æ­¥æ‰§è¡Œï¼ˆå¯è§†åŒ–å±•ç¤ºï¼‰                          â”‚
â”‚                                                          â”‚
â”‚ âœ“ å‚æ•°éªŒè¯     [100%] â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ 0.2s                 â”‚
â”‚ âœ“ æƒé™æ£€æŸ¥     [100%] â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ 0.1s                 â”‚
â”‚ â— æ‰§è¡Œå·¥å…·     [ 50%] â”â”â”â”â”â”â”â”â”â”â”â” æ‰§è¡Œä¸­...            â”‚
â”‚ â—‹ å¤„ç†ç»“æœ     [  0%] â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ç­‰å¾…                 â”‚
â”‚                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 3: è¿”å›ç»“æœ + æ›´æ–°è®°å¿†                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ {                                                    â”‚ â”‚
â”‚ â”‚   success: true,                                     â”‚ â”‚
â”‚ â”‚   data: { content: "...", size: 1234 },              â”‚ â”‚
â”‚ â”‚   stats: { duration: 150 }                           â”‚ â”‚
â”‚ â”‚ }                                                    â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. Skill æŠ€èƒ½æ‰§è¡Œæµç¨‹

```
ç”¨æˆ·è¯·æ±‚: "å¸®æˆ‘reviewè¿™ä¸ªæ–‡ä»¶çš„ä»£ç "
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 1: æ„å›¾è¯†åˆ« & æŠ€èƒ½åŒ¹é…                             â”‚
â”‚                                                          â”‚
â”‚ â¤ æ„å›¾: ä»£ç å®¡æŸ¥                                        â”‚
â”‚ â¤ åŒ¹é…æŠ€èƒ½: CodeReviewer                                â”‚
â”‚ â¤ æ‰§è¡Œæ¨¡å¼: è‡ªåŠ¨                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 2: æŠ€èƒ½æ‰§è¡Œï¼ˆå¤šé˜¶æ®µï¼‰                              â”‚
â”‚                                                          â”‚
â”‚ Skill: CodeReviewer                                      â”‚
â”‚ â”œâ”€ Phase 1: æ”¶é›†ä¸Šä¸‹æ–‡                                  â”‚
â”‚ â”‚  â”œâ”€ è¯»å–å½“å‰æ–‡ä»¶                                      â”‚
â”‚ â”‚  â”œâ”€ åˆ†æé¡¹ç›®ç»“æ„                                      â”‚
â”‚ â”‚  â””â”€ æ£€æµ‹è¯­è¨€/æ¡†æ¶                                     â”‚
â”‚ â”‚                                                       â”‚
â”‚ â”œâ”€ Phase 2: ä»£ç åˆ†æ                                    â”‚
â”‚ â”‚  â”œâ”€ é™æ€åˆ†æ                                          â”‚
â”‚ â”‚  â”œâ”€ å¤æ‚åº¦æ£€æµ‹                                        â”‚
â”‚ â”‚  â””â”€ æœ€ä½³å®è·µæ£€æŸ¥                                      â”‚
â”‚ â”‚                                                       â”‚
â”‚ â”œâ”€ Phase 3: ç”ŸæˆæŠ¥å‘Š                                    â”‚
â”‚ â”‚  â”œâ”€ é—®é¢˜åˆ—è¡¨                                          â”‚
â”‚ â”‚  â”œâ”€ æ”¹è¿›å»ºè®®                                          â”‚
â”‚ â”‚  â””â”€ ä»£ç ç¤ºä¾‹                                          â”‚
â”‚ â”‚                                                       â”‚
â”‚ â””â”€ Phase 4: è¾“å‡ºç»“æœ                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. è®°å¿†ç³»ç»Ÿå·¥ä½œæµç¨‹

```
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚    ç”¨æˆ·æ¶ˆæ¯è¾“å…¥     â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         å·¥ä½œè®°å¿† (Working Memory)                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  â€¢ å½“å‰ä¸Šä¸‹æ–‡ (æ´»åŠ¨æ–‡ä»¶ã€é€‰ä¸­ä»£ç )                              â”‚  â”‚
â”‚  â”‚  â€¢ æœ€è¿‘æ¶ˆæ¯ (tokené™åˆ¶å†…)                                       â”‚  â”‚
â”‚  â”‚  â€¢ ç›¸å…³é•¿æœŸè®°å¿† (åŠ¨æ€æ£€ç´¢)                                      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚              â”‚              â”‚
                    â–¼              â–¼              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   çŸ­æœŸè®°å¿† (24h)     â”‚ â”‚   é•¿æœŸè®°å¿†       â”‚ â”‚   æƒ…æ™¯è®°å¿†             â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚ â€¢ ä¼šè¯ä¸­çš„é‡è¦ä¿¡æ¯   â”‚ â”‚ â€¢ ç”¨æˆ·åå¥½       â”‚ â”‚ â€¢ å‹ç¼©çš„å†å²å¯¹è¯       â”‚
â”‚ â€¢ ä¸´æ—¶ä¸Šä¸‹æ–‡         â”‚ â”‚ â€¢ é¡¹ç›®çŸ¥è¯†       â”‚ â”‚ â€¢ å…³é”®ç‚¹æ‘˜è¦           â”‚
â”‚ â€¢ è‡ªåŠ¨è¿‡æœŸ           â”‚ â”‚ â€¢ å­¦ä¹ çš„æŠ€èƒ½     â”‚ â”‚ â€¢ ä¸»é¢˜ç´¢å¼•             â”‚
â”‚                      â”‚ â”‚ â€¢ æ°¸ä¹…ä¿å­˜       â”‚ â”‚                        â”‚
â”‚ [é‡è¦åº¦é«˜â†’æå‡åˆ°é•¿æœŸ]â”‚ â”‚                  â”‚ â”‚ [å¯¹è¯è¶…é™â†’å‹ç¼©ä¸ºæƒ…æ™¯]  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4. ä»»åŠ¡ä¸­æ–­ä¸æ¢å¤æµç¨‹

```
æ­£å¸¸æ‰§è¡Œä¸­
    â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                  â”‚
    â–¼                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç”¨æˆ·å–æ¶ˆ â”‚      â”‚  å¼‚å¸¸ä¸­æ–­   â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
     â”‚                  â”‚
     â–¼                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      åˆ›å»ºæ£€æŸ¥ç‚¹              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Checkpoint {          â”‚  â”‚
â”‚  â”‚   taskId: "...",      â”‚  â”‚
â”‚  â”‚   stepIndex: 2,       â”‚  â”‚
â”‚  â”‚   stepState: {...},   â”‚  â”‚
â”‚  â”‚   timestamp: 1234567  â”‚  â”‚
â”‚  â”‚ }                     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ç”¨æˆ·é€‰æ‹©ï¼š                 â”‚
â”‚   [ç»§ç»­æ‰§è¡Œ] [æ”¾å¼ƒä»»åŠ¡]      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
       â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
       â–¼             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ä»æ£€æŸ¥ç‚¹   â”‚  â”‚  æ¸…ç†èµ„æº  â”‚
â”‚ æ¢å¤æ‰§è¡Œ   â”‚  â”‚  ç»“æŸä»»åŠ¡  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## æ¨¡å—è¯¦è§£

### 1. MCP å·¥å…·ç³»ç»Ÿ (`/src/extension/mcp/`)

| æ–‡ä»¶ | èŒè´£ |
|------|------|
| `MCPRegistry.ts` | å·¥å…·æ³¨å†Œä¸­å¿ƒï¼Œç®¡ç†æ‰€æœ‰å·¥å…·çš„ç”Ÿå‘½å‘¨æœŸ |
| `MCPExecutor.ts` | å·¥å…·æ‰§è¡Œå™¨ï¼Œæ”¯æŒå¤šç§æ‰§è¡Œç±»å‹ |
| `MCPParser.ts` | è§£æç”¨æˆ·è¾“å…¥ä¸­çš„å·¥å…·è°ƒç”¨ |
| `MCPAgent.ts` | è‡ªä¸»å†³ç­–è°ƒç”¨å·¥å…· |
| `builtins.ts` | 30+ å†…ç½®å·¥å…·å®šä¹‰ |
| `additionalBuiltins.ts` | æ‰©å±•å·¥å…·ï¼ˆä»£ç åˆ†æã€é‡æ„ç­‰ï¼‰ |

**å†…ç½®å·¥å…·æ¸…å•:**

| å·¥å…·ID | åç§° | è¯´æ˜ |
|--------|------|------|
| `builtin_read_file` | è¯»å–æ–‡ä»¶ | è¯»å–æŒ‡å®šè·¯å¾„çš„æ–‡ä»¶å†…å®¹ |
| `builtin_write_file` | å†™å…¥æ–‡ä»¶ | å°†å†…å®¹å†™å…¥æŒ‡å®šæ–‡ä»¶ |
| `builtin_search_files` | æœç´¢æ–‡ä»¶ | åœ¨å·¥ä½œåŒºä¸­æœç´¢åŒ¹é…çš„æ–‡ä»¶ |
| `builtin_search_code` | æœç´¢ä»£ç  | åœ¨ä»£ç æ–‡ä»¶ä¸­æœç´¢æ–‡æœ¬æˆ–æ­£åˆ™ |
| `builtin_run_command` | æ‰§è¡Œå‘½ä»¤ | åœ¨ç»ˆç«¯æ‰§è¡ŒShellå‘½ä»¤ |
| `builtin_http_request` | HTTPè¯·æ±‚ | å‘é€HTTPè¯·æ±‚å¹¶è·å–å“åº” |
| `builtin_get_project_structure` | è·å–é¡¹ç›®ç»“æ„ | è·å–å½“å‰é¡¹ç›®çš„ç›®å½•ç»“æ„ |
| `builtin_get_editor_context` | è·å–ç¼–è¾‘å™¨ä¸Šä¸‹æ–‡ | è·å–å½“å‰æ´»åŠ¨ç¼–è¾‘å™¨çš„ä¿¡æ¯ |
| `builtin_insert_code` | æ’å…¥ä»£ç  | åœ¨å½“å‰ç¼–è¾‘å™¨å…‰æ ‡ä½ç½®æ’å…¥ä»£ç  |
| `builtin_git_status` | GitçŠ¶æ€ | è·å–å½“å‰Gitä»“åº“çŠ¶æ€ |
| `builtin_git_pull` | Gitæ‹‰å– | ä»è¿œç¨‹ä»“åº“æ‹‰å–æœ€æ–°ä»£ç  |
| `builtin_git_push` | Gitæ¨é€ | æ¨é€æœ¬åœ°æäº¤åˆ°è¿œç¨‹ä»“åº“ |
| `builtin_git_commit` | Gitæäº¤ | æäº¤æ›´æ”¹åˆ°æœ¬åœ°ä»“åº“ |
| `builtin_git_checkout` | Gitåˆ‡æ¢åˆ†æ”¯ | åˆ‡æ¢åˆ°æŒ‡å®šåˆ†æ”¯ |
| `builtin_git_diff` | Gitå·®å¼‚ | æ˜¾ç¤ºæœªæäº¤çš„æ›´æ”¹ |
| `builtin_git_log` | Gitæ—¥å¿— | æ˜¾ç¤ºæäº¤å†å² |
| `builtin_run_test` | è¿è¡Œæµ‹è¯• | è¿è¡Œé¡¹ç›®çš„æµ‹è¯•å¥—ä»¶ |
| `builtin_build` | æ„å»ºé¡¹ç›® | æ„å»º/ç¼–è¯‘é¡¹ç›® |
| `builtin_diagram` | ç”Ÿæˆå›¾è¡¨ | æ ¹æ®ä»£ç æˆ–æè¿°ç”Ÿæˆå›¾è¡¨ |
| `builtin_gentest` | ç”Ÿæˆæµ‹è¯• | ä¸ºä»£ç è‡ªåŠ¨ç”Ÿæˆå•å…ƒæµ‹è¯• |
| `builtin_analyze_code` | åˆ†æä»£ç  | åˆ†æä»£ç ç»“æ„ã€å¤æ‚åº¦ã€ä¾èµ– |
| `builtin_refactor_code` | é‡æ„ä»£ç  | æ‰§è¡Œä»£ç é‡æ„æ“ä½œ |
| `builtin_format_code` | æ ¼å¼åŒ–ä»£ç  | æ ¼å¼åŒ–ä»£ç æˆ–æ–‡ä»¶ |
| `builtin_explain_code` | è§£é‡Šä»£ç  | è·å–ä»£ç çš„è¯¦ç»†è§£é‡Š |
| `builtin_suggest_optimization` | ä¼˜åŒ–å»ºè®® | åˆ†æä»£ç å¹¶æä¾›ä¼˜åŒ–å»ºè®® |
| `builtin_generate_docs` | ç”Ÿæˆæ–‡æ¡£ | ä¸ºä»£ç ç”Ÿæˆæ–‡æ¡£æ³¨é‡Š |
| `builtin_analyze_dependencies` | åˆ†æä¾èµ– | åˆ†æé¡¹ç›®ä¾èµ–å…³ç³» |
| `builtin_find_symbol` | æŸ¥æ‰¾ç¬¦å· | åœ¨å·¥ä½œåŒºä¸­æŸ¥æ‰¾ç¬¦å·å®šä¹‰ |
| `builtin_diagnostics` | ä»£ç è¯Šæ–­ | è·å–ä»£ç è¯Šæ–­ä¿¡æ¯ |
| `builtin_auto_fix` | è‡ªåŠ¨ä¿®å¤ | è‡ªåŠ¨ä¿®å¤ä»£ç é—®é¢˜ |
| `builtin_list_tools` | åˆ—å‡ºå·¥å…· | åˆ—å‡ºæ‰€æœ‰å¯ç”¨çš„MCPå·¥å…· |

### 2. Skill æŠ€èƒ½ç³»ç»Ÿ (`/src/extension/skills/`)

```
skills/
â”œâ”€â”€ BaseSkill.ts          # æŠ€èƒ½åŸºç±»
â”œâ”€â”€ interfaces.ts         # æŠ€èƒ½æ¥å£å®šä¹‰
â”œâ”€â”€ implementations/      # å†…ç½®æŠ€èƒ½
â”‚   â”œâ”€â”€ CodeReviewer.ts   # ä»£ç å®¡æŸ¥
â”‚   â”œâ”€â”€ TestArchitect.ts  # æµ‹è¯•ç”Ÿæˆ
â”‚   â”œâ”€â”€ DependencyGuardian.ts  # ä¾èµ–ç®¡ç†
â”‚   â””â”€â”€ ToolMaker.ts      # å·¥å…·ç”Ÿæˆ
â”œâ”€â”€ package/              # æŠ€èƒ½åŒ…ç®¡ç†
â”‚   â”œâ”€â”€ SkillLoader.ts    # åŠ è½½å™¨
â”‚   â”œâ”€â”€ SkillExecutor.ts  # æ‰§è¡Œå™¨
â”‚   â””â”€â”€ SkillMCPBridge.ts # MCPæ¡¥æ¥
â””â”€â”€ adapters/             # è¯­è¨€é€‚é…å™¨
    â”œâ”€â”€ NodeAdapter.ts
    â”œâ”€â”€ PythonAdapter.ts
    â”œâ”€â”€ GoAdapter.ts
    â””â”€â”€ JavaAdapter.ts
```

### 3. è®°å¿†ç³»ç»Ÿ (`/src/extension/memory/`)

```typescript
interface MemoryArchitecture {
  // å·¥ä½œè®°å¿† - å½“å‰ä¼šè¯çš„å³æ—¶ä¸Šä¸‹æ–‡
  workingMemory: {
    currentContext: string;      // å½“å‰æ“ä½œä¸Šä¸‹æ–‡
    recentMessages: Message[];   // æœ€è¿‘æ¶ˆæ¯ï¼ˆtokenå—é™ï¼‰
    relevantMemories: Memory[];  // åŠ¨æ€æ£€ç´¢çš„ç›¸å…³è®°å¿†
    maxTokens: 4000;             // æœ€å¤§tokenæ•°
  };
  
  // çŸ­æœŸè®°å¿† - 24å°æ—¶å†…çš„ä¸´æ—¶ä¿¡æ¯
  shortTermMemory: {
    entries: MemoryEntry[];      // ä¸´æ—¶è®°å¿†æ¡ç›®
    maxEntries: 50;              // æœ€å¤§æ¡ç›®æ•°
    ttl: 24 * 60 * 60 * 1000;    // å­˜æ´»æ—¶é—´
  };
  
  // é•¿æœŸè®°å¿† - æ°¸ä¹…ä¿å­˜çš„é‡è¦ä¿¡æ¯
  longTermMemory: {
    userPreferences: Memory[];   // ç”¨æˆ·åå¥½
    projectKnowledge: Memory[];  // é¡¹ç›®çŸ¥è¯†
    learnedSkills: Memory[];     // å­¦ä¹ çš„æŠ€èƒ½
    facts: Memory[];             // ä¸€èˆ¬äº‹å®
  };
  
  // æƒ…æ™¯è®°å¿† - å‹ç¼©çš„å†å²å¯¹è¯
  episodicMemory: {
    episodes: Episode[];         // å‹ç¼©åçš„å¯¹è¯æƒ…æ™¯
    maxEpisodes: 100;            // æœ€å¤§æƒ…æ™¯æ•°
    compressionRatio: number;    // å‹ç¼©æ¯”ç‡
  };
}
```

### 4. ä»»åŠ¡æ‰§è¡Œç®¡é“ (`/src/extension/execution/`)

```typescript
interface TaskExecutionPipeline {
  // åˆ›å»ºæ‰§è¡Œè®¡åˆ’
  createPlan(params: {
    name: string;
    source: 'mcp' | 'skill' | 'agent';
    steps: Step[];
  }): ExecutionPlan;
  
  // æ‰§è¡Œæ­¥éª¤ï¼ˆæ”¯æŒä¸­æ–­æ¢å¤ï¼‰
  executeStep(taskId: string, stepIndex: number, executor: Function): Promise<Result>;
  
  // ä»»åŠ¡æ§åˆ¶
  pauseTask(taskId: string): boolean;
  resumeTask(taskId: string): boolean;
  cancelTask(taskId: string): boolean;
  
  // æ£€æŸ¥ç‚¹ç®¡ç†ï¼ˆç”¨äºæ¢å¤ï¼‰
  createCheckpoint(taskId: string, state: any): void;
  getCheckpoint(taskId: string): Checkpoint;
}
```

---

## æŠ€æœ¯ä¼˜åŠ¿

### 1. ä»»åŠ¡æ‰§è¡Œé€æ˜åŒ–

- **å®æ—¶å¯è§†åŒ–**: æ¯ä¸ªæ­¥éª¤çš„çŠ¶æ€ã€è¿›åº¦ã€è€—æ—¶éƒ½æ¸…æ™°å±•ç¤º
- **ç±»å‹æ ‡è¯†**: æ¸…æ¥šæ ‡æ˜æ˜¯ MCPä»»åŠ¡ã€Skillä»»åŠ¡è¿˜æ˜¯Agentä»»åŠ¡
- **è¯¦ç»†æ—¥å¿—**: è®°å½•å®Œæ•´çš„æ‰§è¡Œè¿‡ç¨‹ï¼Œä¾¿äºè°ƒè¯•
- **ä¸­æ–­æ¢å¤**: ä»»åŠ¡è¢«ä¸­æ–­åå¯ä»æ£€æŸ¥ç‚¹æ¢å¤

### 2. æ™ºèƒ½è®°å¿†ç®¡ç†

- **å››å±‚è®°å¿†**: å·¥ä½œ/çŸ­æœŸ/é•¿æœŸ/æƒ…æ™¯å››å±‚æ¶æ„
- **è‡ªåŠ¨å‹ç¼©**: è¶…é•¿å¯¹è¯è‡ªåŠ¨å‹ç¼©ä¸ºæ‘˜è¦ï¼ŒèŠ‚çœtoken
- **ç›¸å…³æ€§æ£€ç´¢**: åŸºäºå…³é”®è¯çš„å¿«é€Ÿè®°å¿†æ£€ç´¢
- **é‡è¦æ€§è¡°å‡**: ä¸å¸¸ç”¨çš„è®°å¿†è‡ªåŠ¨é™ä½ä¼˜å…ˆçº§
- **è‡ªåŠ¨æå‡**: é«˜é¢‘è®¿é—®çš„çŸ­æœŸè®°å¿†è‡ªåŠ¨æå‡ä¸ºé•¿æœŸè®°å¿†

### 3. å·¥å…·ç³»ç»Ÿå¯æ‰©å±•

- **æ ‡å‡†åè®®**: éµå¾ª MCP åè®®ï¼Œå…¼å®¹æ€§å¼º
- **å¤šæ‰§è¡Œç±»å‹**: å‡½æ•°/HTTP/å‘½ä»¤/è„šæœ¬å…¨æ”¯æŒ
- **å®‰å…¨æœºåˆ¶**: æƒé™æ§åˆ¶ã€ç¡®è®¤å¯¹è¯ã€é€Ÿç‡é™åˆ¶
- **çƒ­åŠ è½½**: æ”¯æŒè¿è¡Œæ—¶åŠ¨æ€åŠ è½½å·¥å…·

### 4. å¤šæ¨¡å‹é€‚é…

```typescript
// ç»Ÿä¸€çš„é€‚é…å™¨æ¥å£
interface LLMAdapter {
  chat(messages: Message[], options: Options): AsyncIterableIterator<Chunk>;
  getTokenCount(text: string): number;
  getSupportedFeatures(): Features;
}

// å·²å®ç°çš„é€‚é…å™¨
- OpenAIAdapter      // GPT-4, GPT-3.5
- AnthropicAdapter   // Claude 3
- DeepSeekAdapter    // DeepSeek-V2/V3
- OllamaAdapter      // æœ¬åœ°æ¨¡å‹
```

---

## æ‰©å±•æŒ‡å—

### æ·»åŠ æ–°çš„ MCP å·¥å…·

```typescript
// 1. åœ¨ builtins.ts æˆ–æ–°æ–‡ä»¶ä¸­å®šä¹‰å·¥å…·
const myTool: MCPToolDefinition = {
  id: 'custom_my_tool',
  name: 'æˆ‘çš„å·¥å…·',
  description: 'å·¥å…·æè¿°',
  category: 'custom',
  parameters: [
    { name: 'param1', type: 'string', required: true }
  ],
  execution: {
    type: 'function',
    builtinFunction: 'myToolFunction',
  },
};

// 2. å®ç°æ‰§è¡Œå‡½æ•°
const myToolFunction: MCPBuiltinFunction = async (params, context) => {
  return { result: '...' };
};

// 3. æ³¨å†Œåˆ° builtinFunctions
builtinFunctions['myToolFunction'] = myToolFunction;
```

### åˆ›å»ºæ–°çš„ Skill

```typescript
export class MySkill extends BaseSkill {
  id = 'my-skill';
  name = 'æˆ‘çš„æŠ€èƒ½';
  
  async execute(context: SkillContext): Promise<SkillResult> {
    await this.updateProgress('collecting', 20);
    await this.updateProgress('processing', 60);
    await this.updateProgress('outputting', 100);
    return { success: true, data: {} };
  }
}
```

---

## ç›®å½•ç»“æ„

```
src/
â”œâ”€â”€ extension.ts              # å…¥å£æ–‡ä»¶
â”œâ”€â”€ extension/
â”‚   â”œâ”€â”€ agent/               # Agent ç¼–æ’å™¨
â”‚   â”œâ”€â”€ api/                 # LLM é€‚é…å™¨
â”‚   â”œâ”€â”€ chatview/            # èŠå¤©ç•Œé¢
â”‚   â”œâ”€â”€ execution/           # ä»»åŠ¡æ‰§è¡Œç®¡é“ â­
â”‚   â”œâ”€â”€ memory/              # è®°å¿†ç³»ç»Ÿ â­
â”‚   â”œâ”€â”€ mcp/                 # MCP å·¥å…·ç³»ç»Ÿ
â”‚   â”œâ”€â”€ skills/              # Skill æŠ€èƒ½ç³»ç»Ÿ
â”‚   â””â”€â”€ ...
â”œâ”€â”€ webview/
â”‚   â”œâ”€â”€ components/          # React ç»„ä»¶
â”‚   â”‚   â””â”€â”€ TaskExecutionView.tsx  # ä»»åŠ¡å¯è§†åŒ– â­
â”‚   â””â”€â”€ ...
â””â”€â”€ types/                   # ç±»å‹å®šä¹‰
```
